!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"runFire",(function(){return p}));const r=document.getElementById("fire").getContext("2d"),n=r.createImageData(1500,400),s=document.getElementById("fps"),o=document.getElementById("selectedOption"),a=new class{constructor(){this.width=1500,this.height=400,this.fire=new Uint8Array(this.width*this.height*4).fill(0)}updateScreen(){for(let t=0;t<this.width;t++){const e=this.width*(this.height-2)+t<<2;this.fire[e]=Math.floor(255*Math.random()),this.fire[e+1]=0,this.fire[e+2]=0,this.fire[e+3]=255}for(let t=0;t<this.height-1;t++)for(let e=0;e<this.width;e++){const i=t*this.width+e<<2,r=(t+1)*this.width+(e-1+this.width)%this.width<<2,n=(t+1)*this.width+(e+this.width)%this.width<<2,s=(t+1)*this.width+(e+1+this.width)%this.width<<2,o=(t+2)*this.width+(e+this.width)%this.width<<2;this.fire[i]=Math.floor((this.fire[r]+this.fire[n]+this.fire[s]+this.fire[o])/4.01),this.fire[i+1]=0,this.fire[i+2]=0,this.fire[i+3]=255}}getFire(){return this.fire}clear(){this.fire=new Uint8Array(this.width*this.height*4).fill(0)}};let h,c,f,l,u=0,d=0,m=0;const w=()=>{o.value!==f&&(c&&c.clear(),c="Javascript"===o.value?a:h.instance.exports,f=o.value),setTimeout(w,0),c.updateScreen();const t="Javascript"===o.value?c.getFire():l;n.data.set(t),r.putImageData(n,0,0),++w.frame%100||(console.log("gc"),h.instance.exports.__collect()),(()=>{const t=performance.now();u+=1,d>=1e3?(s.innerHTML=Math.floor(1e3*u/d),u=0,d=0):d+=t-m,m=t})()};w.frame=0;const p=async()=>{await(async()=>{const t={env:{abort(t,e,i,r){console.error(`Abort called at ${e}:${i}:${r}`)},seed:()=>1e64*Math.random(),visit(){}}};try{const e=fetch("build/optimized.wasm");h="function"==typeof WebAssembly.instantiateStreaming?await WebAssembly.instantiateStreaming(e,t):await WebAssembly.instantiate(await(await e).arrayBuffer(),t);const{memory:i,getDataBuffer:r}=h.instance.exports,n=r();l=new Uint8Array(i.buffer,n,24e5)}catch(t){console.error("Can't instantiate WebAssembly module.\n",t)}})(),h&&w()};p()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vanMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb250ZXh0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJpbWdEYXRhIiwiY3JlYXRlSW1hZ2VEYXRhIiwiZnBzRWxlbWVudCIsImZpcmVFZmZlY3RKcyIsInRoaXMiLCJ3aWR0aCIsImhlaWdodCIsImZpcmUiLCJVaW50OEFycmF5IiwiZmlsbCIsImluZGV4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaiIsImJvdHRvbUxlZnQiLCJib3R0b20iLCJib3R0b21SaWdodCIsImJvdHRvbURvd24iLCJ3YXNtSW5zdGFuY2UiLCJmaXJlRWZmZWN0IiwibGFzdE9wdGlvbiIsIndhc21CeXRlTWVtb3J5QXJyYXkiLCJmcHMiLCJhY2NUaW1lIiwibGFzdFRpbWUiLCJhbmltYXRlIiwiY2xlYXIiLCJpbnN0YW5jZSIsInNldFRpbWVvdXQiLCJ1cGRhdGVTY3JlZW4iLCJnZXRGaXJlIiwiZGF0YSIsInNldCIsInB1dEltYWdlRGF0YSIsImZyYW1lIiwiY29uc29sZSIsImxvZyIsIl9fY29sbGVjdCIsIm5vdyIsInBlcmZvcm1hbmNlIiwiaW5uZXJIVE1MIiwidXBkYXRlRlBTIiwicnVuRmlyZSIsImFzeW5jIiwiaW1wb3J0cyIsImVudiIsIl9tc2ciLCJfZmlsZSIsImxpbmUiLCJjb2x1bW4iLCJlcnJvciIsInNlZWQiLCJyZXNwb25zZSIsImZldGNoIiwiV2ViQXNzZW1ibHkiLCJpbnN0YW50aWF0ZVN0cmVhbWluZyIsImluc3RhbnRpYXRlIiwiYXJyYXlCdWZmZXIiLCJtZW1vcnkiLCJnZXREYXRhQnVmZmVyIiwib2Zmc2V0IiwiYnVmZmVyIiwiZSIsImZldGNoV2FzbSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxP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QXNCLElBQUlkLFdBQVdtRCxFQUFPRyxPQUFRRCxFQUFRdkQsTUFDNUQsTUFBT3lELEdBQ1AzQixRQUFRZSxNQUFNLDBDQUEyQ1ksS0EyQ3JEQyxHQUNEN0MsR0FJTE8sS0FHRmlCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBGaXJlRWZmZWN0IH0gZnJvbSAnLi9qcydcclxuXHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJlJylcclxuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXHJcbmNvbnN0IHdpZHRoID0gMTUwMFxyXG5jb25zdCBoZWlnaHQgPSA0MDBcclxuY29uc3QgaW1nRGF0YSA9IGNvbnRleHQuY3JlYXRlSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpXHJcbmNvbnN0IGZwc0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnBzJylcclxuY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkT3B0aW9uJylcclxuY29uc3QgZmlyZUVmZmVjdEpzID0gbmV3IEZpcmVFZmZlY3QoKVxyXG5sZXQgd2FzbUluc3RhbmNlXHJcbmxldCBmaXJlRWZmZWN0XHJcbmxldCBsYXN0T3B0aW9uXHJcbmxldCBtZW1vcnlcclxubGV0IHdhc21CeXRlTWVtb3J5QXJyYXlcclxubGV0IGZwcyA9IDBcclxubGV0IGFjY1RpbWUgPSAwXHJcbmxldCBsYXN0VGltZSA9IDBcclxuXHJcbmNvbnN0IGZldGNoV2FzbSA9IGFzeW5jICgpID0+IHtcclxuICBjb25zdCBpbXBvcnRzID0ge1xyXG4gICAgZW52OiB7XHJcbiAgICAgIGFib3J0KF9tc2csIF9maWxlLCBsaW5lLCBjb2x1bW4pIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBBYm9ydCBjYWxsZWQgYXQgJHtfZmlsZX06JHtsaW5lfToke2NvbHVtbn1gKVxyXG4gICAgICB9LFxyXG4gICAgICBzZWVkKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogMWU2NFxyXG4gICAgICB9LFxyXG4gICAgICB2aXNpdCgpIHt9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBJbnN0YW50aWF0ZSB3YXNtIG1vZHVsZVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGZldGNoKCdidWlsZC9vcHRpbWl6ZWQud2FzbScpXHJcbiAgICBpZiAodHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHdhc21JbnN0YW5jZSA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKHJlc3BvbnNlLCBpbXBvcnRzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd2FzbUluc3RhbmNlID0gYXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYXdhaXQgKGF3YWl0IHJlc3BvbnNlKS5hcnJheUJ1ZmZlcigpLCBpbXBvcnRzKVxyXG4gICAgfVxyXG4gICAgY29uc3QgeyBtZW1vcnksIGdldERhdGFCdWZmZXIgfSA9IHdhc21JbnN0YW5jZS5pbnN0YW5jZS5leHBvcnRzXHJcbiAgICBjb25zdCBvZmZzZXQgPSBnZXREYXRhQnVmZmVyKClcclxuICAgIHdhc21CeXRlTWVtb3J5QXJyYXkgPSBuZXcgVWludDhBcnJheShtZW1vcnkuYnVmZmVyLCBvZmZzZXQsIGhlaWdodCAqIHdpZHRoICogNClcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBDYW4ndCBpbnN0YW50aWF0ZSBXZWJBc3NlbWJseSBtb2R1bGUuXFxuYCwgZSlcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHVwZGF0ZUZQUyA9ICgpID0+IHtcclxuICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKVxyXG4gIGZwcyArPSAxXHJcbiAgaWYgKGFjY1RpbWUgPj0gMTAwMCkge1xyXG4gICAgZnBzRWxlbWVudC5pbm5lckhUTUwgPSBNYXRoLmZsb29yKCgxMDAwICogZnBzKSAvIGFjY1RpbWUpXHJcbiAgICBmcHMgPSAwXHJcbiAgICBhY2NUaW1lID0gMFxyXG4gIH0gZWxzZSB7XHJcbiAgICBhY2NUaW1lICs9IG5vdyAtIGxhc3RUaW1lXHJcbiAgfVxyXG4gIGxhc3RUaW1lID0gbm93XHJcbn1cclxuXHJcbmNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XHJcbiAgaWYgKG9wdGlvbi52YWx1ZSAhPT0gbGFzdE9wdGlvbikge1xyXG4gICAgaWYgKGZpcmVFZmZlY3QpIHtcclxuICAgICAgZmlyZUVmZmVjdC5jbGVhcigpXHJcbiAgICB9XHJcbiAgICBmaXJlRWZmZWN0ID0gb3B0aW9uLnZhbHVlID09PSAnSmF2YXNjcmlwdCcgPyBmaXJlRWZmZWN0SnMgOiB3YXNtSW5zdGFuY2UuaW5zdGFuY2UuZXhwb3J0c1xyXG4gICAgbGFzdE9wdGlvbiA9IG9wdGlvbi52YWx1ZVxyXG4gIH1cclxuXHJcbiAgc2V0VGltZW91dChhbmltYXRlLCAwKVxyXG5cclxuICBmaXJlRWZmZWN0LnVwZGF0ZVNjcmVlbigpXHJcbiAgY29uc3QgZmlyZSA9IG9wdGlvbi52YWx1ZSA9PT0gJ0phdmFzY3JpcHQnID8gZmlyZUVmZmVjdC5nZXRGaXJlKCkgOiB3YXNtQnl0ZU1lbW9yeUFycmF5XHJcbiAgaW1nRGF0YS5kYXRhLnNldChmaXJlKVxyXG4gIGNvbnRleHQucHV0SW1hZ2VEYXRhKGltZ0RhdGEsIDAsIDApXHJcblxyXG4gIGlmICghKCsrYW5pbWF0ZS5mcmFtZSAlIDEwMCkpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiZ2NcIilcclxuICAgIHdhc21JbnN0YW5jZS5pbnN0YW5jZS5leHBvcnRzLl9fY29sbGVjdCgpXHJcbiAgfVxyXG5cclxuICB1cGRhdGVGUFMoKVxyXG59XHJcbmFuaW1hdGUuZnJhbWUgPSAwXHJcblxyXG5leHBvcnQgY29uc3QgcnVuRmlyZSA9IGFzeW5jICgpID0+IHtcclxuICBhd2FpdCBmZXRjaFdhc20oKVxyXG4gIGlmICghd2FzbUluc3RhbmNlKSB7XHJcbiAgICByZXR1cm5cclxuICB9XHJcblxyXG4gIGFuaW1hdGUoKVxyXG59XHJcblxyXG5ydW5GaXJlKClcclxuIiwiZXhwb3J0IGNsYXNzIEZpcmVFZmZlY3Qge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy53aWR0aCA9IDE1MDBcclxuICAgIHRoaXMuaGVpZ2h0ID0gNDAwXHJcbiAgICB0aGlzLmZpcmUgPSBuZXcgVWludDhBcnJheSh0aGlzLndpZHRoICogdGhpcy5oZWlnaHQgKiA0KS5maWxsKDApXHJcbiAgfVxyXG5cclxuICB1cGRhdGVTY3JlZW4oKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud2lkdGg7IGkrKykge1xyXG4gICAgICAvLyByYW5kb21pemUgdGhlIDJuZCByb3cgZnJvbSB0aGUgYm90dG9tXHJcbiAgICAgIGNvbnN0IGluZGV4ID0gKHRoaXMud2lkdGggKiAodGhpcy5oZWlnaHQgLSAyKSArIGkpIDw8IDJcclxuICAgICAgdGhpcy5maXJlW2luZGV4XSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NSlcclxuICAgICAgdGhpcy5maXJlW2luZGV4ICsgMV0gPSAwXHJcbiAgICAgIHRoaXMuZmlyZVtpbmRleCArIDJdID0gMFxyXG4gICAgICB0aGlzLmZpcmVbaW5kZXggKyAzXSA9IDI1NVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5oZWlnaHQgLSAxOyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLndpZHRoOyBqKyspIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IChpICogdGhpcy53aWR0aCArIGopIDw8IDIgLy8gY29udmVydCB0aGUgaiBhbmQgaSBjb29yZGluYXRlcyB0byB0aGUgYXJyYXkgaW5kZXhcclxuICAgICAgICBjb25zdCBib3R0b21MZWZ0ID0gKChpICsgMSkgKiB0aGlzLndpZHRoICsgKChqIC0gMSArIHRoaXMud2lkdGgpICUgdGhpcy53aWR0aCkpIDw8IDJcclxuICAgICAgICBjb25zdCBib3R0b20gPSAoKGkgKyAxKSAqIHRoaXMud2lkdGggKyAoKGogKyB0aGlzLndpZHRoKSAlIHRoaXMud2lkdGgpKSA8PCAyXHJcbiAgICAgICAgY29uc3QgYm90dG9tUmlnaHQgPSAoKGkgKyAxKSAqIHRoaXMud2lkdGggKyAoKGogKyAxICsgdGhpcy53aWR0aCkgJSB0aGlzLndpZHRoKSkgPDwgMlxyXG4gICAgICAgIGNvbnN0IGJvdHRvbURvd24gPSAoKGkgKyAyKSAqIHRoaXMud2lkdGggKyAoKGogKyB0aGlzLndpZHRoKSAlIHRoaXMud2lkdGgpKSA8PCAyXHJcblxyXG4gICAgICAgIHRoaXMuZmlyZVtpbmRleF0gPSBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgKHRoaXMuZmlyZVtib3R0b21MZWZ0XSArXHJcbiAgICAgICAgICAgIHRoaXMuZmlyZVtib3R0b21dICtcclxuICAgICAgICAgICAgdGhpcy5maXJlW2JvdHRvbVJpZ2h0XSArXHJcbiAgICAgICAgICAgIHRoaXMuZmlyZVtib3R0b21Eb3duXSkgL1xyXG4gICAgICAgICAgICA0LjAxXHJcbiAgICAgICAgKVxyXG4gICAgICAgIHRoaXMuZmlyZVtpbmRleCArIDFdID0gMFxyXG4gICAgICAgIHRoaXMuZmlyZVtpbmRleCArIDJdID0gMFxyXG4gICAgICAgIHRoaXMuZmlyZVtpbmRleCArIDNdID0gMjU1XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEZpcmUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5maXJlXHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuZmlyZSA9IG5ldyBVaW50OEFycmF5KHRoaXMud2lkdGggKiB0aGlzLmhlaWdodCAqIDQpLmZpbGwoMClcclxuICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==